(this["webpackJsonpto-do_with_database"]=this["webpackJsonpto-do_with_database"]||[]).push([[0],{31:function(e,t,s){},33:function(e,t,s){},37:function(e,t,s){"use strict";s.r(t);var a=s(9),n=s(22),r=s.n(n),c=(s(31),s(0)),i=s.n(c),o=s(1),u=s(10),l=(s(33),s(6));function d(e){var t=e.errorMessageActive,s=e.errorMessage,n=e.setErrorMessageActive;return Object(a.useEffect)((function(){var e=setTimeout((function(){n(!1)}),2e3);return function(){return clearTimeout(e)}}),[t]),Object(l.jsx)("div",{className:t?"error-message active":"error-message",children:Object(l.jsx)("p",{children:s})})}var j=s(17),b=s(26),v=Object(b.a)({apiKey:"AIzaSyDb2CaImjZHl99ewJKDpPvhb6hFySvFr_g",authDomain:"to-do-withdatabase.firebaseapp.com",databaseURL:"https://to-do-withdatabase-default-rtdb.firebaseio.com",projectId:"to-do-withdatabase",storageBucket:"to-do-withdatabase.appspot.com",messagingSenderId:"110427066017",appId:"1:110427066017:web:42723a6b66a5a65f5faae0"}),g=Object(j.b)(v);function f(e){var t=e.setActiveRegistration,s=e.activeLogIn,n=e.setActiveLogIn,r=e.setErrorMessageActive,c=e.setErrorMessage,d=Object(a.useState)(""),b=Object(u.a)(d,2),v=b[0],f=b[1],h=Object(a.useState)(""),O=Object(u.a)(h,2),p=O[0],m=O[1],x=function(){var e=Object(o.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,e.next=4,Object(j.c)(g,v,p);case 4:e.sent&&(n(!1),t(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r(!0),c("Ops, login or password is bad or user doesn't exist ");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:s?"login-form active":"login-form",onClick:function(e){return e.stopPropagation()},children:[Object(l.jsx)("h1",{children:"Log in"}),Object(l.jsxs)("form",{children:[Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"email",placeholder:"Email",required:!0,onChange:function(e){return f(e.target.value)}})}),Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"password",placeholder:"Password",required:!0,onChange:function(e){return m(e.target.value)}})}),Object(l.jsx)("button",{className:"btn",onClick:x,children:"Log IN"}),Object(l.jsxs)("p",{className:"text",children:["Haven't an account ",Object(l.jsx)("span",{onClick:function(){return n(!1),void t(!0)},children:"Registration"})]})]})]})}function h(e){var t=e.activeRegistration,s=e.setActiveRegistration,n=e.setActiveLogIn,r=e.setActiveRegistratoinSucceed,c=e.setErrorMessageActive,d=e.setErrorMessage,b=(e.errorMessageActive,Object(a.useState)("")),v=Object(u.a)(b,2),f=v[0],h=v[1],O=Object(a.useState)(""),p=Object(u.a)(O,2),m=p[0],x=p[1];function A(e,t){h(e.target.value)}function k(e,t){x(e.target.value)}var w=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Object(j.a)(g,f,m);case 4:e.sent,R(),S(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Firebase: Password should be at least 6 characters (auth/weak-password)."===e.t0.message?(c(!0),d("Password should be at least 6 characters")):"Firebase: Error (auth/email-already-in-use)."===e.t0.message&&(c(!0),d("User already exist"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();function R(){s(!1),n(!1),r(!0)}function S(){A(null),k(null)}return Object(l.jsxs)("div",{className:t?"registration-form active":"registration-form",onClick:function(e){return e.stopPropagation()},children:[Object(l.jsx)("h1",{children:"Registration"}),Object(l.jsxs)("form",{children:[Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"email",placeholder:"Email",required:!0,onChange:A})}),Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"password",placeholder:"Password",required:!0,onChange:k})}),Object(l.jsx)("button",{className:"btn",type:"submit",onClick:w,children:"Registration"}),Object(l.jsxs)("p",{className:"text",children:["Have an account? ",Object(l.jsx)("span",{onClick:function(){return s(!1),void n(!0)},children:"Log in"})]})]})]})}function O(e){var t=e.activeRegistratoinSucceed,s=e.setActiveLogIn,a=e.setActiveRegistration,n=e.setActiveRegistratoinSucceed;return Object(l.jsxs)("div",{className:t?"registration-succeed-form active":"registration-succeed-form",children:[Object(l.jsx)("h1",{children:"Registration succeed, then: "}),Object(l.jsx)("button",{className:"btn",onClick:function(){return n(!1),a(!1),void s(!0)},children:"Log IN"})]})}function p(e){var t=e.allTask,s=e.setAllTask;Object(a.useEffect)((function(){fetch("https://to-do-withdatabase-default-rtdb.firebaseio.com/todos.json").then((function(e){return e.json()})).then((function(e){if(null===e)s([]),console.log("database is empty!");else{Object.values(e).map((function(e){return n.push(e)}))}}))}),[]);var n=[];return Object(a.useEffect)((function(){s(n)}),[]),Object(l.jsxs)("div",{className:"task-list",children:[Object(l.jsx)("h2",{children:"To do:"}),Object(l.jsxs)("ul",{children:[function(){if(0===t.length)return Object(l.jsx)("h3",{children:"Not even todos yet :("})}(),t.map((function(e){return Object(l.jsxs)("li",{children:[Object(l.jsx)("input",{type:"checkbox",onClick:function(){return function(e){var a=t.map((function(t){return t.id===e&&(t.isDone=!t.isDone),t}));s(a)}(e.id)}}),Object(l.jsx)("p",{className:e.isDone?"check-up active":"check-up",children:e.todoTitle}),Object(l.jsxs)("small",{children:[e.id,Object(l.jsx)("i",{onClick:function(){return function(e){s((function(t){return t.filter((function(t){return t.id!==e.id}))}))}(e)},children:"\xd7"})]})]},e.key)}))]})]})}var m=s(13),x=s(2);function A(e){var t=e.setNewTask,s=e.newTask,a=e.setAllTask;function n(){a((function(e){return[].concat(Object(m.a)(e),[s])})),fetch("https://to-do-withdatabase-default-rtdb.firebaseio.com/todos.json",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s.idFromDatabase=e.name})),t({value:""})}return Object(l.jsx)("div",{className:"new-task",children:Object(l.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(l.jsx)("input",{onChange:function(e){var s,a=e.target,n=a.value,r=a.name;t((s={id:(new Date).toLocaleString()},Object(x.a)(s,r,n),Object(x.a)(s,"isDone",!1),Object(x.a)(s,"key",1e3*Math.random()),s))},name:"todoTitle",value:s.todoTitle||"",type:"search",placeholder:"New task..."}),Object(l.jsx)("button",{className:"add-todo",type:"submit",disabled:""===s.value,onClick:function(){return n()},children:"+"})]})})}function k(e){var t=e.Login,s=e.Registration,a=e.RegistrationSucceed,n=e.activeRegistratoinSucceed,c=e.setActiveRegistratoinSucceed,i=e.activeRegistration,o=e.setActiveRegistration,u=e.activeLogIn,d=e.setActiveLogIn,j=e.ErrorMessage,b=e.errorMessageActive,v=e.setErrorMessageActive,g=e.errorMessage,f=e.setErrorMessage;return r.a.createPortal(Object(l.jsxs)("div",{className:i||u||n||b?"layout-form active":"layout-form",children:[Object(l.jsx)(j,{errorMessageActive:b,errorMessage:g,setErrorMessageActive:v}),Object(l.jsx)(s,{activeRegistration:i,setActiveRegistration:o,activeLogIn:u,setActiveLogIn:d,setActiveRegistratoinSucceed:c,setErrorMessageActive:v,errorMessageActive:b,setErrorMessage:f}),Object(l.jsx)(a,{activeRegistratoinSucceed:n,setActiveRegistration:o,setActiveLogIn:d,setActiveRegistratoinSucceed:c}),Object(l.jsx)(t,{activeRegistration:i,setActiveRegistration:o,activeLogIn:u,setActiveLogIn:d,setErrorMessageActive:v,setErrorMessage:f})]}),document.getElementById("portal"))}var w=function(){var e=Object(a.useState)(!0),t=Object(u.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(!1),c=Object(u.a)(r,2),b=c[0],v=c[1],m=Object(a.useState)(!1),x=Object(u.a)(m,2),w=x[0],R=x[1],S=Object(a.useState)({value:""}),y=Object(u.a)(S,2),M=y[0],N=y[1],E=Object(a.useState)([]),L=Object(u.a)(E,2),I=L[0],T=L[1],C=Object(a.useState)(!1),D=Object(u.a)(C,2),P=D[0],F=D[1],_=Object(a.useState)(""),q=Object(u.a)(_,2),B=q[0],J=q[1],H=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.d)(g);case 2:v(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(k,{Login:f,Registration:h,RegistrationSucceed:O,ErrorMessage:d,errorMessageActive:P,setErrorMessageActive:F,errorMessage:B,setErrorMessage:J,activeRegistration:s,setActiveRegistration:n,activeLogIn:b,setActiveLogIn:v,activeRegistratoinSucceed:w,setActiveRegistratoinSucceed:R}),Object(l.jsx)(A,{newTask:M,setNewTask:N,setAllTask:T,allTask:I}),Object(l.jsx)(p,{allTask:I,setAllTask:T,newTask:M}),Object(l.jsx)("button",{className:"btn logout",onClick:function(){return H()},children:"Log OUT"})]})},R=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,38)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};r.a.render(Object(l.jsx)(w,{}),document.getElementById("root")),R()}},[[37,1,2]]]);
//# sourceMappingURL=main.649af327.chunk.js.map